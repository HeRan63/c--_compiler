

## 项目结构

主要源文件：
- `lexical.l`: 词法分析器
- `syntax.y`: 语法分析器
- `semantic.{h,c}`: 语义分析
- `intermediate.{h,c}`: 中间代码生成
- `mips.{h,c}`: MIPS 目标代码生成
- `tools.{h,c}`: 工具函数
- `main.c`: 主程序入口

## 功能特性

1. **词法分析**：识别 C-- 语言的基本词素
2. **语法分析**：构建抽象语法树
3. **语义分析**：类型检查和作用域分析
4. **中间代码生成**：生成三地址码形式的中间表示
5. **目标代码生成**：将中间代码转换为 MIPS 汇编代码

### MIPS 代码生成特性

目标代码生成模块（`mips.c` 和 `mips.h`）实现了以下功能：

1. **寄存器管理**
   - 临时寄存器分配和回收
   - 变量到寄存器的映射
   - 寄存器溢出处理

2. **内存管理**
   - 栈帧管理
   - 局部变量分配
   - 数组和结构体的内存布局

3. **指令生成**
   - 算术运算指令
   - 控制流指令（分支、跳转）
   - 函数调用约定
   - I/O 操作支持

4. **优化特性**
   - 基本的寄存器分配优化
   - 简单的指令选择
   - 调试信息支持

## 使用方法

1. **编译项目**：
```bash
make
```

2. **运行编译器**：
```bash
./parser test.cmm test.s
```
- `test.cmm`: 输入的 C-- 源代码文件
- `test.s`: 输出的 MIPS 汇编代码文件

3. **调试选项**：
在 `mips.h` 中可以设置调试选项：
```c
#define MIPS_DEBUG 1  // 启用调试输出
```

## 支持的 C-- 语言特性

1. **基本数据类型**
   - 整型 (int)

2. **控制结构**
   - if-else 条件语句
   - while 循环语句

3. **函数特性**
   - 函数定义和调用
   - 参数传递
   - 返回值

4. **I/O 操作**
   - read() 函数
   - write() 函数

## 生成的 MIPS 代码特点

1. **代码段组织**
   - .data 段：存放全局数据
   - .text 段：存放代码

2. **系统调用支持**
   - 支持基本的输入输出操作
   - 实现了 read/write 函数

3. **函数调用约定**
   - 遵循标准 MIPS 调用约定
   - 正确处理参数传递和返回值

## 调试和错误处理

1. **调试信息**
   - 支持详细的调试输出
   - 包含寄存器分配信息
   - 包含代码生成过程信息

2. **错误处理**
   - 完善的错误检查
   - 清晰的错误信息输出

## 注意事项

1. 确保输入的 C-- 代码符合语言规范
2. 生成的 MIPS 代码需要在 MIPS 模拟器中运行
3. 调试时可以开启 MIPS_DEBUG 选项获取更多信息

